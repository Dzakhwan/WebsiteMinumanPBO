<!DOCTYPE HTML>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Admin Login</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link th:href="@{/main.css}" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet" />
    <style>
        body {
            font-family: 'Open Sans', sans-serif;
        }
        .login-bg {
            background: url('https://images.unsplash.com/photo-1620131810504-79cc8cb61a70?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D') no-repeat center;
            background-size: cover;
        }
    </style>
</head>
<body class="bg-slate-50">
    <header class="bg-white container mx-auto">
        <h1 class="text-4xl font-bold p-8">Admin Login</h1>
    </header>
    <div class="container mx-auto">
        <label class="text-2xl font-bold">Username</label>
        <input type ="text"class="border-2 border-gray-300 rounded-md p-2 mb-4" />
        <label class="text-2xl font-bold">Password</label>
        <input type ="password" class="border-2 border-gray-300 rounded-md p-2 mb-4" />
        <button class="bg-blue-500 text-black font-bold py-2 px-4 rounded">Login</button>
    </div>
</body>
<script>
    document.getElementById("adminLoginForm").addEventListener("submit", async function(e) {
        e.preventDefault();

        const username = document.getElementById("username").value;
        const password = document.getElementById("password").value;

        const response = await fetch("/auth/admin/login", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({ username, password })
        });

        if (response.ok) {
            const data = await response.json();
            const token = data.token;

            // Simpan token ke localStorage (sementara)
            localStorage.setItem("jwtToken", token);

            // Redirect ke halaman dashboard
            window.location.href = "/admin/dashboard";
        } else {
            alert("Login gagal. Cek username/password.");
        }
    });
</script>
</html>