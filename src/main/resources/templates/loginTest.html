<!DOCTYPE HTML>
<html
        lang="en"
        xmlns:th="http://www.thymeleaf.org">
<head>
    <title>TestLogin</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link th:href="@{/main.css}" rel="stylesheet" />
</head>
<body class="bg-slate-50">
    <header class="bg-white container mx-auto">
        <h1 class="text-4xl font-bold p-8">Admin Login</h1>
    </header>
    <div class="container mx-auto">
        <label class="text-2xl font-bold">Username</label>
        <input type ="text"class="border-2 border-gray-300 rounded-md p-2 mb-4" required/>
        <label class="text-2xl font-bold">Password</label>
        <input type ="password" class="border-2 border-gray-300 rounded-md p-2 mb-4" required/>
        <button class="bg-blue-500 text-black font-bold py-2 px-4 rounded">Login</button>
    </div>
</body>
<script>
    document.getElementById("adminLoginForm").addEventListener("submit", async function(e) {
        e.preventDefault();

        const username = document.getElementById("username").value;
        const password = document.getElementById("password").value;

        const response = await fetch("/auth/admin/login", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({ username, password })
        });

        if (response.ok) {
            const data = await response.json();
            const token = data.token;

            // Simpan token ke localStorage (sementara)
            localStorage.setItem("jwtToken", token);

            // Redirect ke halaman dashboard
            window.location.href = "/admin/dashboard";
        } else {
            alert("Login gagal. Cek username/password.");
        }
    });
</script>
</html>